<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<!-- 用Spring管理Struts -->
	<constant name="struts.objectFactory" value="spring" />
	
	<!-- 定义所有Action -->
	<package name="default" extends="struts-default">
	
		<!-- <result name="success" type="chain">
			<param name="actionName">/profile</param>
		</result> -->
	
		<!-- test.jsp================================================================= -->
		
			<action name="reader-signin" class="readerAction" method="signin">
				<result name="input">/test-signin.jsp</result>
			</action>
			
			<!-- <action name="reader-login" class="readerAction" method="signin">
				<result name="input">/test-signin.jsp</result>
			</action> -->
			
			<action name="reader-search" class="readerAction" method="search">
				<!-- TODO: 搜索种类代完善，实现需更改视图（表单添加下拉框） -->
				<result name="isTitle" type="chain">
					<param name="actionName">searchTitle</param>
				</result>
				<!-- <result name="isAuthor" type="chain">
					<param name="actionName">searchAuthor</param>
				</result> -->
			</action>
			
				<action name="searchTitle" class="bookAction" method="searchTitle">
					<result name="input">/search.jsp</result>
				</action>
				
				<!-- <action name="searchTitle" class="bookAction" method="searchAuthor">
					<result name="input">/test-search.jsp</result>
				</action> -->
			
			<action name="reader-current-borrowed" class="readerAction" method="currentBorrowed">
				<result name="success" type="chain">
					<param name="actionName">get-current-borrowed</param>
				</result>
			</action>
			
				<action name="get-current-borrowed" class="recordAction" method="getCurrentBorrowed">
					<result name="input">/test-current-borrowed.jsp</result>
				</action>
				
				<!-- <action name="get-book-by-current-record" class="bookAction" method="getBookByCurrentRecord">
					<result name="input">/test-current-borrowed.jsp</result>
				</action> -->
				
			<action name="reader-borrow-history" class="readerAction" method="borrowHistory">
				<result name="success" type="chain">
					<param name="actionName">get-borrow-history</param>
				</result>
			</action>
			
				<action name="get-borrow-history" class="recordAction" method="getBorrowHistory">
					<result name="input">/test-borrow-history.jsp</result>
				</action>
				
				<!-- <action name="get-book-by-history-record" class="bookAction" method="getBookByHistoryRecord">
					<result name="input">/test-borrow-history.jsp</result>
				</action> -->
		

		<!-- search.jsp================================================================= -->
			<action name="reserve" class="bookAction" method="reserve">
				<result name="login">/test-login.jsp</result>
				<result name="reserve">/index.jsp</result>
				<result name="input">/search.jsp</result>
			</action>
		
		<!-- profile.jsp================================================================= -->
		
			<action name="changeInfo" class="readerAction" method="changeInfo">
				<result name="input">/changeInfo.jsp</result>
				<result name="success">/index.jsp</result>
			</action>
			
			<action name="reset" class="readerAction" method="reset">
				<result name="input">/index.jsp</result>
			</action>
		
		<!-- index.jsp================================================================= -->
		
			<action name="reader-login" class="readerAction" method="signin">
				<result name="success">/index.jsp</result>
				<result name="input">/test-login.jsp</result>
			</action>
		
		
			<action name="in" class="readerAction" method="login">
				<result name="success">/test-login.jsp</result>
			</action>
			
			<action name="out" class="readerAction" method="logout">
				<result name="success">/index.jsp</result>
			</action>
	</package>
	
</struts>